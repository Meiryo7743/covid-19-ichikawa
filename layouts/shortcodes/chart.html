{{ $data_src := print "data/" (.Get "src") ".json" }}
{{ $data_id := print "json_" (.Get "src") }}
{{ $chart_id := print "chart-" (replace (.Get "src") "_" "-") }}

<div class="data-chart">
  <canvas
    aria-label='{{ .Page.Title | title }}'
    role="img"
    class="data-chart__canvas"
    id='{{ $chart_id | safeHTMLAttr }}'
  ></canvas>
</div>

<script>
  window.addEventListener("load", function () {
    // readFile で強引に JSON を読み込ませる
    const {{ $data_id | safeJS }} = {{ readFile $data_src | safeJS }};

    drawChart('{{ $chart_id | safeJS }}', {{ $data_id | safeJS }});
  });
</script>