[fetch]
src = "https://www.city.ichikawa.lg.jp/pub01/hasseijokyo.html"

[[fetch.table]]
dst = "./data/raw-patients-with-symptoms.csv"
index = 0

[[fetch.table]]
dst = "./data/raw-patients-without-symptoms.csv"
index = 1

[[get-details]]
dst = "./data/details-of-patients-with-symptoms.yaml"
src = "./data/raw-patients-with-symptoms.csv"

[[get-details]]
dst = "./data/details-of-patients-without-symptoms.yaml"
src = "./data/raw-patients-without-symptoms.csv"

[[get-sum]]
dst = "./data/the-number-of-patients-with-symptoms.yaml"
src = "./data/raw-patients-with-symptoms.csv"

[[get-sum]]
dst = "./data/the-number-of-patients-without-symptoms.yaml"
src = "./data/raw-patients-without-symptoms.csv"

[[replace-format.key.age]]
find = "10歳未満"
replace = "under_teens"

[[replace-format.key.age]]
find = "10代"
replace = "teens"

[[replace-format.key.age]]
find = "20代"
replace = "twenties"

[[replace-format.key.age]]
find = "30代"
replace = "thirties"

[[replace-format.key.age]]
find = "40代"
replace = "forties"

[[replace-format.key.age]]
find = "50代"
replace = "fifties"

[[replace-format.key.age]]
find = "60代"
replace = "sixties"

[[replace-format.key.age]]
find = "70代"
replace = "seventies"

[[replace-format.key.age]]
find = "80代"
replace = "eighties"

[[replace-format.key.age]]
find = "90代"
replace = "nineties"

[[replace-format.key.age]]
find = "90代以上"
replace = "over_nineties"

[[replace-format.value.ichikawa]]
find = "\\s+"
replace = ""

[[replace-format.value.ichikawa]]
find = "\\D+"
replace = ""

[[replace-format.value.chiba]]
find = "\\s+"
replace = ""

[[replace-format.value.chiba]]
find = "^\\D+\\d+\\D+"
replace = ""

[[replace-format.value.chiba]]
find = "^(\\d+)\\D+"
replace = "\\1"

[[replace-format.value.inspection_date]]
find = "\\s+"
replace = ""

[[replace-format.value.inspection_date]]
find = "^調査中|None$"
replace = ""

[[replace-format.value.inspection_date]]
find = "(\\d+)月(\\d+)日"
replace = "2020-\\1-\\2"

[[replace-format.value.onset_date]]
find = "\\s+"
replace = ""

[[replace-format.value.onset_date]]
find = "^調査中|None$"
replace = ""

[[replace-format.value.onset_date]]
find = "(\\d+)月(\\d+)日"
replace = "2020-\\1-\\2"

[[replace-format.value.age]]
find = "\\s+"
replace = ""

[[replace-format.value.age]]
find = "^調査中|None$"
replace = ""

[[replace-format.value.sex]]
find = "\\s+"
replace = ""

[[replace-format.value.sex]]
find = "^調査中|None$"
replace = ""

[[replace-format.value.occupation]]
find = "\\s+"
replace = ""

[[replace-format.value.occupation]]
find = "^調査中|None$"
replace = ""

[[replace-format.value.infection_sources]]
find = "\\s{2}接触"
replace = "接触"

[[replace-format.value.infection_sources]]
find = "\\s{2}"
replace = "、"

[[replace-format.value.infection_sources]]
find = "\\s+"
replace = ""

[[replace-format.value.infection_sources]]
find = "^調査中|None$"
replace = ""

[[replace-format.value.infection_sources]]
find = "、+"
replace = ","

[[replace-format.value.infection_sources]]
find = "接触(,|$)"
replace = "\\1"

[[replace-format.value.activities]]
find = "\\s{2}"
replace = "、"

[[replace-format.value.activities]]
find = "\\s+"
replace = ""

[[replace-format.value.activities]]
find = "^調査中|None$"
replace = ""

[[replace-format.value.activities]]
find = "、+"
replace = ","
